v {xschem version=3.4.7 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 700 -280 700 -260 {lab=#net1}
N 860 -280 860 -260 {lab=MOSBIUS_T}
N 700 -310 700 -280 {lab=#net1}
N 740 -230 820 -230 {lab=#net1}
N 700 -200 700 -170 {lab=GND_A}
N 700 -170 860 -170 {lab=GND_A}
N 860 -200 860 -170 {lab=GND_A}
N 700 -390 700 -370 {lab=VDDBias_T}
N 860 -290 860 -280 {lab=MOSBIUS_T}
N 700 -280 780 -280 {lab=#net1}
N 780 -280 780 -230 {lab=#net1}
N 860 -230 870 -230 {lab=GND_A}
N 870 -230 870 -170 {lab=GND_A}
N 690 -230 700 -230 {lab=GND_A}
N 690 -230 690 -170 {lab=GND_A}
N 860 -300 860 -290 {lab=MOSBIUS_T}
N 690 -170 700 -170 {lab=GND_A}
N 860 -170 870 -170 {lab=GND_A}
N 780 -170 780 -150 {lab=GND_A}
N 700 -20 700 0 {lab=#net2}
N 860 -20 860 0 {lab=MOSBIUS_R}
N 700 -50 700 -20 {lab=#net2}
N 740 30 820 30 {lab=#net2}
N 700 60 700 90 {lab=GND_A}
N 700 90 860 90 {lab=GND_A}
N 860 60 860 90 {lab=GND_A}
N 700 -130 700 -110 {lab=VDDBias_R}
N 860 -30 860 -20 {lab=MOSBIUS_R}
N 700 -20 780 -20 {lab=#net2}
N 780 -20 780 30 {lab=#net2}
N 860 30 870 30 {lab=GND_A}
N 870 30 870 90 {lab=GND_A}
N 690 30 700 30 {lab=GND_A}
N 690 30 690 90 {lab=GND_A}
N 860 -40 860 -30 {lab=MOSBIUS_R}
N 690 90 700 90 {lab=GND_A}
N 860 90 870 90 {lab=GND_A}
N 780 90 780 110 {lab=GND_A}
N -550 -340 -550 -330 {lab=GND}
N -550 -410 -550 -400 {lab=VDD_A}
N -550 -200 -550 -190 {lab=GND}
N -550 -270 -550 -260 {lab=T_LO+}
N -550 -200 -550 -190 {lab=GND}
N -550 -270 -550 -260 {lab=T_LO+}
N -300 -200 -300 -190 {lab=GND}
N -300 -270 -300 -260 {lab=T_LO-}
N -300 -200 -300 -190 {lab=GND}
N -300 -270 -300 -260 {lab=T_LO-}
N -550 -60 -550 -50 {lab=GND}
N -550 -130 -550 -120 {lab=T_IF+}
N -550 -60 -550 -50 {lab=GND}
N -550 -130 -550 -120 {lab=T_IF+}
N -300 -60 -300 -50 {lab=GND}
N -300 -130 -300 -120 {lab=T_IF-}
N -300 -60 -300 -50 {lab=GND}
N -300 -130 -300 -120 {lab=T_IF-}
N -550 -60 -550 -50 {lab=GND}
N -550 -130 -550 -120 {lab=T_IF+}
N -550 -60 -550 -50 {lab=GND}
N -550 -130 -550 -120 {lab=T_IF+}
N -300 -60 -300 -50 {lab=GND}
N -300 -130 -300 -120 {lab=T_IF-}
N -300 -60 -300 -50 {lab=GND}
N -300 -130 -300 -120 {lab=T_IF-}
N -550 80 -550 90 {lab=GND}
N -550 10 -550 20 {lab=R_LO+}
N -550 80 -550 90 {lab=GND}
N -550 10 -550 20 {lab=R_LO+}
N -300 80 -300 90 {lab=GND}
N -300 10 -300 20 {lab=R_LO-}
N -300 80 -300 90 {lab=GND}
N -300 10 -300 20 {lab=R_LO-}
N -550 230 -550 240 {lab=GND}
N -550 160 -550 170 {lab=R_RF+}
N -550 230 -550 240 {lab=GND}
N -550 160 -550 170 {lab=R_RF+}
N -300 230 -300 240 {lab=GND}
N -300 160 -300 170 {lab=R_RF-}
N -300 230 -300 240 {lab=GND}
N -300 160 -300 170 {lab=R_RF-}
N -550 230 -550 240 {lab=GND}
N -550 160 -550 170 {lab=R_RF+}
N -550 230 -550 240 {lab=GND}
N -550 160 -550 170 {lab=R_RF+}
N -300 230 -300 240 {lab=GND}
N -300 160 -300 170 {lab=R_RF-}
N -300 230 -300 240 {lab=GND}
N -300 160 -300 170 {lab=R_RF-}
N -300 -340 -300 -330 {lab=GND}
N -300 -410 -300 -400 {lab=VDDBias_R}
N -50 -340 -50 -330 {lab=GND}
N -50 -410 -50 -400 {lab=VDDBias_T}
N -50 -200 -50 -190 {lab=GND}
N -50 -270 -50 -260 {lab=VIN_Switch_T}
N -50 -60 -50 -50 {lab=GND}
N -50 -130 -50 -120 {lab=VIN_Switch_R}
N -50 80 -50 90 {lab=GND}
N -50 10 -50 20 {lab=GND_A}
C {devices/code_shown.sym} 1180 -120 0 0 {name=Models only_toplevel=false
format="tcleval( @value )"
value="
.include /foss/pdks/gf180mcuD/libs.tech/ngspice/design.ngspice
.lib /foss/pdks/gf180mcuD/libs.tech/ngspice/sm141064.ngspice typical
"}
C {devices/code_shown.sym} 1180 20 0 0 {name=Simulation only_toplevel=false value="
**** begin user architecture code
* Run transient analysis
.tran 1n 200n

* control
.control
    run
    set hcopydevtype=postscript
    set hcopypscolor=1
    plot v(RST) v(CLK)+4 v(OUT_3)+8 v(OUT_2)+12 v(OUT_1)+16 v(OUT_0)+20
.endc

.end

**** end user architecture code
"}
C {devices/code_shown.sym} 1190 360 0 0 {name=spice only_toplevel=false value="
.tran 200p 800n

.control
  run
  * UPCONVERSION (WORKING since the RF IF change roles when upconversion)
  plot (V(T_IF+)-V(T_IF-)) V(T_LO+)-V(T_LO-)+2 (V(T_RF+)-V(T_RF-))+4
  plot mag(fft(V(T_RF+) - V(T_RF-)))

  * DOWNCONVERSION
  plot (V(R_IF+)-V(R_IF-)) V(R_LO+)-V(R_LO-)+2 (V(R_RF+)-V(R_RF-))+4
  plot mag(fft(V(R_IF+) - V(R_IF-)))
.endc
"}
C {symbols/nfet_03v3.sym} 720 -230 0 1 {name=M2
L=\{L_min\}
W=\{W_bias_ref\}
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 840 -230 0 0 {name=M3
L=\{L_min\}
W=\{W_bias_out\}
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {devices/res.sym} 700 -340 0 0 {name=Rbias2
value=\{R_bias\}
footprint=1206
device=resistor
m=1}
C {devices/lab_wire.sym} 700 -390 0 0 {name=p55 sig_type=std_logic lab=VDDBias_T}
C {devices/lab_wire.sym} 780 -150 0 0 {name=p56 sig_type=std_logic lab=GND_A}
C {devices/lab_wire.sym} 860 -300 2 0 {name=p59 sig_type=std_logic lab=MOSBIUS_T}
C {symbols/nfet_03v3.sym} 720 30 0 1 {name=M1
L=\{L_min\}
W=\{W_bias_ref\}
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 840 30 0 0 {name=M4
L=\{L_min\}
W=\{W_bias_out\}
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {devices/res.sym} 700 -80 0 0 {name=Rbias1
value=\{R_bias\}
footprint=1206
device=resistor
m=1}
C {devices/lab_wire.sym} 700 -130 0 0 {name=p60 sig_type=std_logic lab=VDDBias_R}
C {devices/lab_wire.sym} 780 110 0 0 {name=p61 sig_type=std_logic lab=GND_A}
C {devices/lab_wire.sym} 860 -40 2 0 {name=p62 sig_type=std_logic lab=MOSBIUS_R}
C {devices/lab_wire.sym} -550 -410 0 0 {name=p1 sig_type=std_logic lab=VDD_A}
C {devices/vsource.sym} -550 -370 0 0 {name=VVDD value=3 savecurrent=false}
C {devices/gnd.sym} -550 -330 0 0 {name=l1 lab=GND}
C {devices/lab_wire.sym} -550 -270 0 0 {name=p3 sig_type=std_logic lab=T_LO+}
C {devices/vsource.sym} -550 -230 0 0 {name=VT_LO+ value="sin(\{V_bias_lo\} \{V_lo\} \{f_lo\} 0 0 0)" savecurrent=false}
C {devices/gnd.sym} -550 -190 0 0 {name=l3 lab=GND}
C {devices/lab_wire.sym} -300 -270 0 0 {name=p2 sig_type=std_logic lab=T_LO-}
C {devices/vsource.sym} -300 -230 0 0 {name=VT_LO- value="sin(\{V_bias_lo\} \{V_lo\} \{f_lo\} 0 0 180)" savecurrent=false}
C {devices/gnd.sym} -300 -190 0 0 {name=l2 lab=GND}
C {devices/lab_wire.sym} -550 -130 0 0 {name=p6 sig_type=std_logic lab=T_IF+}
C {devices/vsource.sym} -550 -90 0 0 {name=VT_IF+ value="sin(\{V_bias_if\} \{V_if\} \{f_if\} 0 0 0)" savecurrent=false}
C {devices/gnd.sym} -550 -50 0 0 {name=l6 lab=GND}
C {devices/lab_wire.sym} -300 -130 0 0 {name=p7 sig_type=std_logic lab=T_IF-}
C {devices/vsource.sym} -300 -90 0 0 {name=VT_IF- value="sin(\{V_bias_if\} \{V_if\} \{f_if\} 0 0 180)" savecurrent=false}
C {devices/gnd.sym} -300 -50 0 0 {name=l7 lab=GND}
C {devices/lab_wire.sym} -550 10 0 0 {name=p8 sig_type=std_logic lab=R_LO+}
C {devices/vsource.sym} -550 50 0 0 {name=VR_LO+ value="sin(\{V_bias_lo\} \{V_lo\} \{f_lo\} 0 0 0)" savecurrent=false}
C {devices/gnd.sym} -550 90 0 0 {name=l8 lab=GND}
C {devices/lab_wire.sym} -300 10 0 0 {name=p9 sig_type=std_logic lab=R_LO-}
C {devices/vsource.sym} -300 50 0 0 {name=VR_LO- value="sin(\{V_bias_lo\} \{V_lo\} \{f_lo\} 0 0 180)" savecurrent=false}
C {devices/gnd.sym} -300 90 0 0 {name=l9 lab=GND}
C {devices/lab_wire.sym} -550 160 0 0 {name=p4 sig_type=std_logic lab=R_RF+}
C {devices/lab_wire.sym} -300 160 0 0 {name=p5 sig_type=std_logic lab=R_RF-}
C {devices/vsource.sym} -550 200 0 0 {name=VT_RF+ value="sin(\{V_bias_rf\} \{V_rf\} \{f_rf\} 0 0 0)" savecurrent=false}
C {devices/vsource.sym} -300 200 0 0 {name=VT_RF- value="sin(\{V_bias_rf\} \{V_rf\} \{f_rf\} 0 0 180)" savecurrent=false}
C {devices/gnd.sym} -550 240 0 0 {name=l4 lab=GND}
C {devices/gnd.sym} -300 240 0 0 {name=l5 lab=GND}
C {devices/vsource.sym} -300 -370 0 0 {name=VVDD1 value=5 savecurrent=false}
C {devices/gnd.sym} -300 -330 0 0 {name=l14 lab=GND}
C {devices/lab_wire.sym} -300 -410 0 0 {name=p23 sig_type=std_logic lab=VDDBias_R}
C {devices/vsource.sym} -1050 -300 0 0 {name=V1 value="PULSE(0 3.3 0 100p 100p 5n 10n)" savecurrent=false}
C {devices/gnd.sym} -1050 -270 0 0 {name=l10 lab=GND}
C {devices/lab_pin.sym} -1050 -330 1 0 {name=p10 sig_type=std_logic lab=CLK}
C {devices/vsource.sym} -1050 200 0 0 {name=V3 value=3.3 savecurrent=false}
C {devices/gnd.sym} -1050 230 0 0 {name=l11 lab=GND
value=3.3}
C {devices/lab_pin.sym} -1050 170 1 0 {name=p11 sig_type=std_logic lab=VDD_D
value=3.3}
C {devices/vsource.sym} -970 200 0 0 {name=V4 value=0 savecurrent=false}
C {devices/gnd.sym} -970 230 0 0 {name=l12 lab=GND
value=0}
C {devices/lab_pin.sym} -970 170 1 0 {name=p12 sig_type=std_logic lab=PN_SEL
value=0}
C {devices/vsource.sym} -1050 20 0 0 {name=V5 value=0 savecurrent=false}
C {devices/gnd.sym} -1050 50 0 0 {name=l13 lab=GND
value=3.3}
C {devices/lab_pin.sym} -1050 -10 1 0 {name=p13 sig_type=std_logic lab=SEED_0
value=3.3}
C {devices/vsource.sym} -970 20 0 0 {name=V6 value=0 savecurrent=false}
C {devices/gnd.sym} -970 50 0 0 {name=l15 lab=GND
value=0}
C {devices/lab_pin.sym} -970 -10 1 0 {name=p14 sig_type=std_logic lab=SEED_1
value=0}
C {devices/vsource.sym} -870 20 0 0 {name=V7 value=0 savecurrent=false}
C {devices/gnd.sym} -870 50 0 0 {name=l16 lab=GND
value=3.3}
C {devices/lab_pin.sym} -870 -10 1 0 {name=p15 sig_type=std_logic lab=SEED_2
value=3.3}
C {devices/vsource.sym} -790 20 0 0 {name=V8 value=3.3 savecurrent=false}
C {devices/gnd.sym} -790 50 0 0 {name=l17 lab=GND
value=0}
C {devices/lab_pin.sym} -790 -10 1 0 {name=p16 sig_type=std_logic lab=SEED_3
value=0}
C {devices/gnd.sym} -890 230 0 0 {name=l18 lab=GND
value=0}
C {devices/lab_pin.sym} -890 170 1 0 {name=p17 sig_type=std_logic lab=GND_D}
C {devices/vsource.sym} -1050 -160 0 0 {name=V9 value="PULSE(3.3 0 20n 100p 100p 1u 2u)" savecurrent=false}
C {devices/gnd.sym} -1050 -130 0 0 {name=l19 lab=GND}
C {devices/lab_pin.sym} -1050 -190 1 0 {name=p18 sig_type=std_logic lab=RST}
C {devices/vsource.sym} -890 200 0 0 {name=V2 value=0 savecurrent=false}
C {devices/vsource.sym} -50 -370 0 0 {name=VVDD2 value=5 savecurrent=false}
C {devices/gnd.sym} -50 -330 0 0 {name=l20 lab=GND}
C {devices/lab_wire.sym} -50 -410 0 0 {name=p19 sig_type=std_logic lab=VDDBias_T}
C {devices/vsource.sym} -50 -230 0 0 {name=VVDD3 value=-5 savecurrent=false}
C {devices/gnd.sym} -50 -190 0 0 {name=l21 lab=GND}
C {devices/lab_wire.sym} -50 -270 0 0 {name=p37 sig_type=std_logic lab=VIN_Switch_T}
C {devices/vsource.sym} -50 -90 0 0 {name=VVDD4 value=-5 savecurrent=false}
C {devices/gnd.sym} -50 -50 0 0 {name=l22 lab=GND}
C {devices/lab_wire.sym} -50 -130 0 0 {name=p38 sig_type=std_logic lab=VIN_Switch_R}
C {devices/vsource.sym} -50 50 0 0 {name=VVDD5 value=0 savecurrent=false}
C {devices/gnd.sym} -50 90 0 0 {name=l23 lab=GND}
C {devices/lab_wire.sym} -50 10 0 0 {name=p41 sig_type=std_logic lab=GND_A}
C {prof-morbius-rf-chip/designs/libs/top/TOPLEVEL.sym} 310 -100 0 0 {name=x1}
C {devices/lab_pin.sym} 460 -320 2 0 {name=p47 sig_type=std_logic lab=OUT_0}
C {devices/lab_pin.sym} 460 -300 2 0 {name=p48 sig_type=std_logic lab=OUT_1}
C {devices/lab_pin.sym} 460 -280 2 0 {name=p49 sig_type=std_logic lab=OUT_2}
C {devices/lab_pin.sym} 460 -260 2 0 {name=p50 sig_type=std_logic lab=OUT_3}
C {devices/lab_wire.sym} 460 -240 2 0 {name=p51 sig_type=std_logic lab=R_IF+}
C {devices/lab_wire.sym} 460 -200 2 0 {name=p52 sig_type=std_logic lab=R_IF-}
C {devices/lab_wire.sym} 460 -220 2 0 {name=p53 sig_type=std_logic lab=T_RF+}
C {devices/lab_wire.sym} 460 -180 2 0 {name=p54 sig_type=std_logic lab=T_RF-}
C {devices/lab_wire.sym} 460 -160 2 0 {name=p57 sig_type=std_logic lab=MOSBIUS_T}
C {devices/lab_wire.sym} 460 -140 2 0 {name=p58 sig_type=std_logic lab=MOSBIUS_R}
C {devices/lab_pin.sym} 160 -320 0 0 {name=p20 sig_type=std_logic lab=VDD_D
value=3.3}
C {devices/lab_pin.sym} 160 -300 0 0 {name=p21 sig_type=std_logic lab=GND_D}
C {devices/lab_pin.sym} 160 -280 0 0 {name=p22 sig_type=std_logic lab=PN_SEL
value=0}
C {devices/lab_pin.sym} 160 -260 0 0 {name=p24 sig_type=std_logic lab=SEED_0
value=3.3}
C {devices/lab_pin.sym} 160 -240 0 0 {name=p25 sig_type=std_logic lab=SEED_1
value=0}
C {devices/lab_pin.sym} 160 -220 0 0 {name=p26 sig_type=std_logic lab=SEED_2
value=3.3}
C {devices/lab_pin.sym} 160 -200 0 0 {name=p27 sig_type=std_logic lab=SEED_3
value=0}
C {devices/lab_pin.sym} 160 -180 0 0 {name=p28 sig_type=std_logic lab=CLK}
C {devices/lab_pin.sym} 160 -160 0 0 {name=p29 sig_type=std_logic lab=RST}
C {devices/lab_wire.sym} 160 -140 0 0 {name=p30 sig_type=std_logic lab=VDD_A}
C {devices/lab_wire.sym} 160 -120 0 0 {name=p31 sig_type=std_logic lab=VDDBias_R}
C {devices/lab_wire.sym} 160 -100 0 0 {name=p32 sig_type=std_logic lab=VDDBias_T}
C {devices/lab_wire.sym} 160 -80 0 0 {name=p33 sig_type=std_logic lab=R_RF+}
C {devices/lab_wire.sym} 160 -60 0 0 {name=p34 sig_type=std_logic lab=T_IF+}
C {devices/lab_wire.sym} 160 -40 0 0 {name=p35 sig_type=std_logic lab=R_RF-}
C {devices/lab_wire.sym} 160 -20 0 0 {name=p36 sig_type=std_logic lab=T_IF-}
C {devices/lab_wire.sym} 160 0 0 0 {name=p39 sig_type=std_logic lab=VIN_Switch_T}
C {devices/lab_wire.sym} 160 20 0 0 {name=p40 sig_type=std_logic lab=VIN_Switch_R}
C {devices/lab_wire.sym} 160 40 0 0 {name=p42 sig_type=std_logic lab=GND_A}
C {devices/lab_wire.sym} 160 60 0 0 {name=p43 sig_type=std_logic lab=T_LO-}
C {devices/lab_wire.sym} 160 80 0 0 {name=p44 sig_type=std_logic lab=T_LO+}
C {devices/lab_wire.sym} 160 100 0 0 {name=p45 sig_type=std_logic lab=R_LO-}
C {devices/lab_wire.sym} 160 120 0 0 {name=p46 sig_type=std_logic lab=R_LO+}
C {devices/code_shown.sym} 1170 -750 0 0 {name=PARAM_INPUT only_toplevel=false value="
* --- Parameters for the Testbench ---

* --- Supply ---
.param V_VDD = 3.3V

* --- Signal Sources ---

// LO from VCO+PLL
.param V_bias_lo = 1.2V
.param V_lo      = 0.5V
.param f_lo      = 50MEG

// RF Input for Receiver
.param V_bias_rf = 1.2V
.param V_rf      = 0.063V
.param f_rf      = 60MEG

// IF Input for Transmitter
.param V_bias_if = 1.2V
.param V_if = 0.5V
.param f_if = 10MEG

// External Current Mirror
.param L_min = 0.28u
.param WL_bias_ref_ratio = 10
.param WL_bias_out_ratio = 60
.param W_bias_ref = \{WL_bias_ref_ratio * L_min\}
.param W_bias_out = \{WL_bias_out_ratio * L_min\}
.param R_bias = 7.5k
"}
